import{m as i}from"./index.9f059a2e.js";import{A as r}from"./api.9842e3f2.js";const a=i("login",{state:()=>({info:"pinia \u53EF\u4EE5\u4F7F\u7528",count:1,ani:"fade",menus:[],user:{}}),persist:{enabled:!0,strategies:[{key:"loginStore",storage:localStorage}]},getters:{},actions:{updateAni(s){this.ani=s},getMenus(){},testMock(){},updateMenu(s){let n=[];for(let t=0;t<s.length;t++)if(s[t].icon="iconfont icon-xitongguanli",s[t].parentId==0)n.some(o=>o.menuId==s[t].menuId)||(s[t].children=[],n.push(s[t]));else for(let e=0;e<n.length;e++)if(n[e].menuId==s[t].parentId){n[e].children||(n[e].children=new Array),n[e].children.push(s[t]);break}return n.sort((t,e)=>t.sort-e.sort),console.error("\u83DC\u5355",n),n},async login(s){return new Promise(async(n,t)=>{let e=await r.post("/login",s);this.user=e.sys_user;let o=this.updateMenu(e.menus);this.menus=o,e?n(e):t(!1)})}}});export{a as u};
