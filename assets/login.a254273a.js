import{m as s}from"./index.b0cd5e5f.js";import{A as r}from"./api.5ce26bc3.js";const a=s("login",{state:()=>({info:"pinia \u53EF\u4EE5\u4F7F\u7528",count:1,ani:"fade",menus:[],user:{}}),persist:{enabled:!0,strategies:[{key:"loginStore",storage:localStorage}]},getters:{},actions:{updateAni(e){this.ani=e},getMenus(){},testMock(){},updateMenu(e){let o=[];if(!e){e=new Array;let t={menuId:1,menuName:"\u9996\u9875",icon:"iconfont icon-xitongguanli",parentId:0,sort:1,children:[]};e.push(t)}for(let t=0;t<e.length;t++)if(e[t].icon="iconfont icon-xitongguanli",e[t].parentId==0)o.some(i=>i.menuId==e[t].menuId)||(e[t].children=[],o.push(e[t]));else for(let n=0;n<o.length;n++)if(o[n].menuId==e[t].parentId){o[n].children||(o[n].children=new Array),o[n].children.push(e[t]);break}return o.sort((t,n)=>t.sort-n.sort),console.error("\u83DC\u5355",o),o},async login(e){return new Promise(async(o,t)=>{let n=await r.post("/login",e);this.user=n.sys_user;let i=this.updateMenu(n.menus);this.menus=i,n?o(n):t(!1)})}}});export{a as u};
